<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>添加标记</title>
    <script charset="utf-8" src="http://map.qq.com/api/js?v=2.exp"></script>
    <style type="text/css">
        *{
            margin: 0;
            padding: 0;
        }
        body, button, input, select, textarea {
            font: 12px/16px Verdana, Helvetica, Arial, sans-serif;
        }
        #info{
            width:603px;
            padding-top:3px;
            overflow:hidden;
        }
        .btn{
            width:112px;
        }
    </style>
    <script>
        var init = function() {
            var center = new qq.maps.LatLng(39.914840,116.359210);
            var map = new qq.maps.Map(document.getElementById('container'),{
                center: center,
                zoom: 17
            });
            var marker = new qq.maps.Marker({
                position: center,
                map: map
            });
            qq.maps.event.addListener(marker,"click",function(){
//                alert("you clicked me")
            });
            //setMap
            var mapM=document.getElementById("mapM");
            qq.maps.event.addDomListener(mapM,"click",function(){
                marker.setVisible(true);
                if(marker.getMap()){
                    marker.setMap(null);
                }else{
                    marker.setMap(map);
                }
            });
            //setClickable
            var cable=document.getElementById("cable");
            qq.maps.event.addDomListener(cable,"click",function(){
                marker.setVisible(true);
                if(marker.getClickable()){
                    marker.setClickable(false);
                }else{
                    marker.setClickable(true);
                }
            });
            //setDraggable
            var drag=document.getElementById("drag");
            qq.maps.event.addDomListener(drag,"click",function(){
                marker.setVisible(true);
                if(marker.getDraggable()){
                    marker.setDraggable(false);
                }else{
                    marker.setDraggable(true);
                }
            });
            //setVisible
            var visibleF=document.getElementById("visibleF");
            qq.maps.event.addDomListener(visibleF,"click",function(){
                marker.setMap(map);
                if(marker.getVisible()){
                    marker.setVisible(false);
                }else{
                    marker.setVisible(true);
                }
            });
            //setPosition
            var flag=true;
            var setP=document.getElementById("setP");
            var latLng=center;
            qq.maps.event.addDomListener(setP,"click",function(){
                marker.setMap(map);
                if(flag){
                    flag=false;
                    marker.setPosition(latLng);
                }else{
                    flag=true;
                    marker.setPosition(center);
                }
            });
        }
    </script>
</head>
<body onload="init()">
<div style="position: absolute; width: 100%; height:100%;" id="container"></div>
<div id="info" style="margin-top:10px; display: none;">
    <button id="mapM" class="btn">setMap</button>
    <button id="cable" class="btn">setClickable</button>
    <button id="drag" class="btn">setDraggable</button>
    <button id="visibleF" class="btn">setVisible</button>
    <button id="setP" class="btn">setPosition</button>
</div>
</body>
</html>